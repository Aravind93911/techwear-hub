<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin - Security Operations Center</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    /* --- SECURITY OPS THEME --- */
    :root {
      --primary: #c62828;
      --background-color: #0f1115;
      --card-bg: #161b22;
      --text-mono: 'Courier New', monospace;
    }
    body { font-family: system-ui, sans-serif; }

    /* LAYOUT */
    .dashboard-grid { display: grid; grid-template-columns: 250px 1fr; min-height: 100vh; }
    
    /* SIDEBAR */
    .sidebar { background: #0d1117; border-right: 1px solid #30363d; padding: 1rem; display: flex; flex-direction: column; }
    .sidebar h3 { font-size: 1rem; color: #8b949e; text-transform: uppercase; margin-top: 1rem;}
    .sidebar a {
      display: block; padding: 0.75rem; color: #c9d1d9; text-decoration: none; border-radius: 6px; cursor: pointer;
    }
    .sidebar a:hover { background: #21262d; }
    .sidebar a.active { background: #21262d; color: var(--primary); border-left: 3px solid var(--primary); }

    /* CONTENT AREAS */
    .main-content { padding: 2rem; }
    .tab-content { display: none; animation: fadeIn 0.3s ease; }
    .tab-content.active { display: block; }
    
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    /* WIDGETS */
    .stat-card { background: var(--card-bg); padding: 1.5rem; border-radius: 6px; border: 1px solid #30363d; margin-bottom: 1rem; }
    .stat-number { font-size: 2rem; font-weight: bold; }
    .table-container { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; overflow: hidden; }
    table { margin: 0; }
    th { background: #161b22; }
    
    /* LOGIN OVERLAY */
    #login-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 999;
      display: flex; align-items: center; justify-content: center;
    }
    .login-box { background: var(--card-bg); padding: 2rem; width: 400px; border: 1px solid #333; text-align: center; }
  </style>
</head>
<body>

  <div id="login-overlay">
    <div class="login-box">
      <hgroup>
        <h2 style="color:white;">SECURE ACCESS</h2>
        <h4 style="color:var(--primary);">SOC DASHBOARD</h4>
      </hgroup>
      <form onsubmit="adminLogin(event)">
        <input type="text" id="adminUser" placeholder="admin" required>
        <input type="password" id="adminPass" placeholder="admin123" required>
        <button type="submit" class="contrast">Authenticate</button>
      </form>
    </div>
  </div>

  <div class="dashboard-grid" id="adminPanel" style="display:none;">
    
    <aside class="sidebar">
      <div style="margin-bottom: 2rem; font-weight:bold; color:white;">üõ°Ô∏è TechWear SOC</div>
      
      <a onclick="switchTab('monitor')" id="nav-monitor" class="active">Live Monitor</a>
      <a onclick="switchTab('threats')" id="nav-threats">Threat Analysis</a>
      <a onclick="switchTab('model')" id="nav-model">Model Configuration</a>
      <a onclick="switchTab('users')" id="nav-users">User Management</a>
      
      <div style="flex-grow:1"></div>
      <a href="index.html" style="color:#f85149;">‚Üê Logout / Exit</a>
    </aside>

    <main class="main-content">
      
      <div id="tab-monitor" class="tab-content active">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <h2>SQL Injection Monitor</h2>
          <button class="outline secondary" onclick="generateRandomAttack()">‚ö† Simulate Attack</button>
        </div>
        
        <div class="grid">
          <div class="stat-card">
            <div class="stat-number" id="totalReq">0</div>
            <small>Total Requests</small>
          </div>
          <div class="stat-card" style="border-color: var(--primary);">
            <div class="stat-number" id="blockedReq" style="color: var(--primary);">0</div>
            <small>Threats Mitigated</small>
          </div>
          <div class="stat-card">
            <div class="stat-number">99.4%</div>
            <small>Model Confidence</small>
          </div>
        </div>

        <div class="stat-card" style="height: 300px; padding: 1rem;">
          <canvas id="trafficChart"></canvas>
        </div>

        <h4 style="margin-top:1rem">Live Traffic Logs</h4>
        <div class="table-container" style="max-height: 250px; overflow-y: auto;">
          <table id="logTable">
            <thead>
              <tr><th>Time</th><th>IP Source</th><th>Payload</th><th>Prediction</th><th>Action</th></tr>
            </thead>
            <tbody id="logBody"></tbody>
          </table>
        </div>
      </div>

      <div id="tab-threats" class="tab-content">
        <h2>Threat Analysis Report</h2>
        <div class="grid">
          <div class="stat-card">
            <h4>Attack Vectors</h4>
            <canvas id="threatPieChart" style="max-height: 250px;"></canvas>
          </div>
          <div class="stat-card">
            <h4>Top Attacking IPs</h4>
            <table>
              <tr><td>192.168.1.45</td><td style="color:var(--primary)">12 Attempts</td></tr>
              <tr><td>10.0.0.5</td><td style="color:var(--primary)">8 Attempts</td></tr>
              <tr><td>172.16.0.22</td><td style="color:var(--primary)">3 Attempts</td></tr>
            </table>
          </div>
        </div>
        <div class="stat-card" style="margin-top:1rem;">
          <h4>Detailed Forensic Log</h4>
          <p>No critical system breaches detected in the last 24 hours.</p>
        </div>
      </div>

      <div id="tab-model" class="tab-content">
        <h2>ML Model Configuration</h2>
        <div class="stat-card">
          <label>Model Sensitivity Threshold (0.1 - 1.0)</label>
          <input type="range" min="0.1" max="1.0" step="0.1" value="0.9">
          
          <label>
            <input type="checkbox" checked> Auto-Block Malicious IPs
          </label>
          <label>
            <input type="checkbox"> Enable Deep Packet Inspection
          </label>
          
          <hr>
          <h4>Retrain Model</h4>
          <p>Last trained: 2 hours ago. Dataset: 50,000 queries.</p>
          <button onclick="alert('Model retraining started... This may take a few minutes.')">Retrain with New Data</button>
        </div>
      </div>

      <div id="tab-users" class="tab-content">
        <h2>User Management</h2>
        <div class="table-container">
          <table role="grid">
            <thead>
              <tr><th>User</th><th>Role</th><th>Status</th><th>Action</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>admin</td>
                <td><strong>Super Admin</strong></td>
                <td style="color:#2ea043">Active</td>
                <td><button class="outline" disabled>Edit</button></td>
              </tr>
              <tr>
                <td>analyst_01</td>
                <td>Security Analyst</td>
                <td style="color:#2ea043">Active</td>
                <td><button class="outline secondary">Revoke</button></td>
              </tr>
              <tr>
                <td>auditor_ext</td>
                <td>Read Only</td>
                <td style="color:orange">Pending</td>
                <td><button class="outline">Approve</button></td>
              </tr>
            </tbody>
          </table>
        </div>
        <button style="margin-top:1rem" class="contrast" onclick="alert('Feature locked in demo mode')">+ Add New User</button>
      </div>

    </main>
  </div>

  <script src="js/admin.js"></script>
</body>
</html>
